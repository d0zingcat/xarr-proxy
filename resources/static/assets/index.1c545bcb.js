import{u as ze,_ as xe}from"./index.08985164.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css               */import{_ as Le}from"./index.vue_vue_type_style_index_0_lang.610f3a44.js";/* empty css               *//* empty css               */import{d as Ie,a as r,r as G,c as Be,aI as s,A as y,B as H,aF as e,aE as a,aK as g,aL as f,u as q,aD as k,D as w,aQ as _,bC as Ue,aY as Ve,bw as Ne,aX as De,by as Te,b1 as Fe,bz as Ke,a$ as je,b0 as qe,bb as Pe,bD as Ae,bA as Ee,bB as Oe}from"./arco.f2670ebc.js";import{a as Qe,b as Me,i as Xe,e as Ye,c as Ge,d as He,f as Je,g as We,l as Ze}from"./radarr.91cc7099.js";import"./vue.758b0c86.js";/* empty css               *//* empty css               *//* empty css               */import"./cloneDeep.c28e1f48.js";const ea={class:"container"},aa={key:1},ta=Ie({__name:"index",setup(oa){const d=t=>{t.value=!0},p=t=>{setTimeout(()=>{t.value=!1},300)},{t:l}=ze(),$=r([]),R=r(!1),z=r(!1),x=r(!1),L=r(!1),I=r(!1),B=r(!1),U=r(!1),V=r(!1),N=r(!1),D=r(!1),i=r([]),P=r([]),J=G({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),W=Be(()=>[{title:l("radarr.rule.validStatus"),dataIndex:"validStatus",slotName:"validStatus",align:"center",width:100},{title:l("radarr.rule.token"),dataIndex:"token",width:100,ellipsis:!0,tooltip:!0},{title:l("radarr.rule.priority"),dataIndex:"priority",width:105,ellipsis:!0,tooltip:!0,sortable:{sortDirections:["ascend","descend"]}},{title:l("radarr.rule.regex"),dataIndex:"regex",width:300,ellipsis:!0,tooltip:!0},{title:l("radarr.rule.replacement"),dataIndex:"replacement",width:200,ellipsis:!0,tooltip:!0},{title:l("radarr.rule.remark"),dataIndex:"remark",ellipsis:!0,tooltip:!0},{title:l("radarr.rule.author"),dataIndex:"author",width:150,ellipsis:!0,tooltip:!0},{title:l("radarr.rule.edit"),slotName:"edit",align:"center",width:100}]),C={current:1,pageSize:10},b=G({showTotal:!0,showPageSize:!0,pageSizeOptions:[10,20,100,1e3],...C}),A=()=>({token:void 0,remark:void 0}),c=r(A()),S=async t=>{d(z),await We(t).then(o=>{P.value=o.data.list,b.current=t.current,b.total=o.data.total}).finally(()=>{p(z),i.value=[]}),await Ze().then(o=>{$.value=o.data})},v=()=>{d(x),S({...C,...c.value}).finally(()=>{p(x)})},Z=()=>{c.value=A()},ee=t=>{S({...C,current:t,...c.value})},ae=t=>{C.pageSize=t,b.pageSize=t,S({...b,...c.value})},T=r(""),F=r({}),te=()=>{T.value=l("rule.form.add.title"),F.value={priority:1e3,regex:".*().*",replacement:"$1",offset:0,author:localStorage.getItem("author")},R.value=!0},oe=()=>{if(!i.value||i.value.length===0){_.warning(l("radarr.rule.select.warning"));return}d(I),Qe(i.value).then(()=>{_.success(l("radarr.rule.remove.success")),S({...b,...c.value})}).finally(()=>{p(I)})},le=()=>{d(B),Me().then(()=>{_.success(l("radarr.rule.sync.success")),v()}).finally(()=>{p(B)})},E=t=>(d(N),Xe(t.fileItem.file).then(()=>{_.success(l("radarr.rule.import.success")),v()}).finally(()=>{p(N)}),{upload:E}),ne=()=>{d(D),Ye(i.value).then(t=>{let o=localStorage.getItem("author");o=o?`@${o}`:"";const m=document.createElement("a");m.download=`radarr${o}.json`,m.style.display="none",m.href=URL.createObjectURL(new Blob([t.data])),document.body.appendChild(m),m.click(),URL.revokeObjectURL(m.href),document.body.removeChild(m)}).finally(()=>{p(D)})},re=t=>{T.value=l("rule.form.edit.title"),F.value=t,R.value=!0},se=(t,o)=>{t.id||(d(L),localStorage.setItem("author",t.author)),Ge(t).then(()=>{_.success(l("radarr.rule.save.success")),v(),o(!0)}).catch(()=>{o(!1)}).finally(()=>{p(L)})},ie=()=>{if(!i.value||i.value.length===0){_.warning(l("radarr.rule.select.warning"));return}d(U),He(i.value).then(()=>{v(),_.success(l("radarr.rule.enable.success"))}).finally(()=>{p(U)})},ce=()=>{if(!i.value||i.value.length===0){_.warning(l("radarr.rule.select.warning"));return}d(V),Je(i.value).then(()=>{v(),_.success(l("radarr.rule.disable.success"))}).finally(()=>{p(V)})};return v(),(t,o)=>{const m=s("Breadcrumb"),ue=Ue,O=Ve,h=Ne,de=De,K=Te,pe=Fe,Q=Ke,me=s("icon-search"),u=je,_e=s("icon-refresh"),j=qe,fe=s("icon-plus"),ve=s("icon-delete"),ye=s("icon-sync"),M=s("icon-check-circle"),X=Pe,Y=s("icon-close-circle"),ge=s("icon-upload"),be=Ae,he=s("icon-download"),ke=s("icon-minus"),we=s("icon-eye"),Re=s("icon-eye-invisible"),Ce=s("icon-edit"),Se=Ee,$e=Oe;return y(),H("div",ea,[e(m,{items:["menu.radarr","menu.radarr.rule"]},null,8,["items"]),e(Le,{visible:R.value,"onUpdate:visible":o[0]||(o[0]=n=>R.value=n),"token-list":$.value,data:F.value,title:T.value,onSave:se},null,8,["visible","token-list","data","title"]),e($e,{class:"general-card",title:q(l)("menu.radarr.rule")},{default:a(()=>[e(K,null,{default:a(()=>[e(h,{flex:1},{default:a(()=>[e(pe,{"label-col-props":{span:5},"wrapper-col-props":{span:15},"label-align":"left",model:c.value},{default:a(()=>[e(K,{gutter:16},{default:a(()=>[e(h,{span:8},{default:a(()=>[e(O,{field:"token",label:t.$t("radarr.rule.token")},{default:a(()=>[e(ue,{modelValue:c.value.token,"onUpdate:modelValue":o[1]||(o[1]=n=>c.value.token=n),options:$.value,placeholder:t.$t("radarr.rule.token.placeholder"),"allow-search":"","allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(h,{span:8},{default:a(()=>[e(O,{field:"remark","label-col-props":{span:8},label:t.$t("radarr.rule.remark")},{default:a(()=>[e(de,{modelValue:c.value.remark,"onUpdate:modelValue":o[2]||(o[2]=n=>c.value.remark=n),"allow-clear":"",placeholder:t.$t("radarr.rule.remark.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Q,{style:{height:"35px"},direction:"vertical"}),e(h,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(j,{size:18},{default:a(()=>[e(u,{type:"primary",loading:x.value,onClick:v},{icon:a(()=>[e(me)]),default:a(()=>[g(" "+f(t.$t("radarr.rule.search")),1)]),_:1},8,["loading"]),e(u,{onClick:Z},{icon:a(()=>[e(_e)]),default:a(()=>[g(" "+f(t.$t("radarr.rule.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{style:{"margin-top":"0"}}),e(K,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(h,{span:12},{default:a(()=>[e(j,null,{default:a(()=>[e(u,{type:"primary",status:"success",loading:L.value,onClick:te},{icon:a(()=>[e(fe)]),default:a(()=>[g(" "+f(t.$t("radarr.rule.add")),1)]),_:1},8,["loading"]),e(u,{type:"primary",status:"danger",loading:I.value,onClick:oe},{icon:a(()=>[e(ve)]),default:a(()=>[g(" "+f(t.$t("radarr.rule.remove")),1)]),_:1},8,["loading"]),e(u,{type:"primary",loading:B.value,onClick:le},{icon:a(()=>[e(ye)]),default:a(()=>[g(" "+f(t.$t("radarr.rule.sync")),1)]),_:1},8,["loading"]),e(X,{content:t.$t("radarr.rule.enable")},{default:a(()=>[e(u,{type:"primary",status:"success",loading:U.value,onClick:ie},{icon:a(()=>[e(M,{size:"21"})]),_:1},8,["loading"])]),_:1},8,["content"]),e(X,{content:t.$t("radarr.rule.disable")},{default:a(()=>[e(u,{type:"primary",status:"warning",loading:V.value,onClick:ce},{icon:a(()=>[e(Y,{size:"21"})]),_:1},8,["loading"])]),_:1},8,["content"])]),_:1})]),_:1}),e(h,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:a(()=>[e(j,null,{default:a(()=>[e(be,{"custom-request":E,"show-file-list":!1},{"upload-button":a(()=>[e(u,{type:"primary",loading:N.value,status:"success"},{icon:a(()=>[e(ge)]),default:a(()=>[g(" "+f(t.$t("radarr.rule.import")),1)]),_:1},8,["loading"])]),_:1}),e(u,{type:"primary",status:"normal",loading:D.value,onClick:ne},{icon:a(()=>[e(he)]),default:a(()=>[g(" "+f(t.$t("radarr.rule.export")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(Se,{selectedKeys:i.value,"onUpdate:selectedKeys":o[3]||(o[3]=n=>i.value=n),"row-key":"id",size:"medium",data:P.value,columns:q(W),bordered:!1,loading:z.value,pagination:b,"row-selection":q(J),onPageSizeChange:ae,onPageChange:ee},{seasonNumber:a(({record:n})=>[n.seasonNumber===-1?(y(),k(ke,{key:0,size:"13",style:w({color:"var(--color-neutral-6)"})},null,8,["style"])):(y(),H("span",aa,f(n.seasonNumber),1))]),monitored:a(({record:n})=>[n.monitored===1?(y(),k(we,{key:0,size:"21",style:w({color:"rgb(var(--green-6))"})},null,8,["style"])):(y(),k(Re,{key:1,size:"21",style:w({color:"var(--color-neutral-6)"})},null,8,["style"]))]),validStatus:a(({record:n})=>[n.validStatus===1?(y(),k(M,{key:0,size:"21",style:w({color:"rgb(var(--green-6))"})},null,8,["style"])):(y(),k(Y,{key:1,size:"21",style:w({color:"rgb(var(--orange-6))"})},null,8,["style"]))]),edit:a(({record:n})=>[e(u,{type:"text",size:"mini",onClick:la=>re(n)},{default:a(()=>[e(Ce,{size:"medium"})]),_:2},1032,["onClick"])]),_:1},8,["selectedKeys","data","columns","loading","pagination","row-selection"])]),_:1},8,["title"])])}}});const Ca=xe(ta,[["__scopeId","data-v-199517f0"]]);export{Ca as default};
