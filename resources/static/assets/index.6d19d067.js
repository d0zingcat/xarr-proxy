import{u as ze,_ as Ie}from"./index.08985164.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css               */import{_ as Le}from"./index.vue_vue_type_style_index_0_lang.610f3a44.js";/* empty css               *//* empty css               */import{d as Re,a as s,r as G,c as Be,aI as r,A as y,B as H,aF as e,aE as t,aK as g,aL as f,u as q,aD as k,D as w,aQ as _,bC as Ue,aY as Ve,bw as Ne,aX as De,by as Te,b1 as Fe,bz as Ke,a$ as je,b0 as qe,bb as Pe,bD as Ae,bA as Ee,bB as Oe}from"./arco.f2670ebc.js";import{a as Qe,b as Me,i as Xe,e as Ye,c as Ge,d as He,f as Je,g as We,l as Ze}from"./sonarr.15b541c7.js";import"./vue.758b0c86.js";/* empty css               *//* empty css               *//* empty css               */import"./cloneDeep.c28e1f48.js";const et={class:"container"},tt={key:1},ot=Re({__name:"index",setup(at){const d=o=>{o.value=!0},p=o=>{setTimeout(()=>{o.value=!1},300)},{t:a}=ze(),x=s([]),S=s(!1),z=s(!1),I=s(!1),L=s(!1),R=s(!1),B=s(!1),U=s(!1),V=s(!1),N=s(!1),D=s(!1),i=s([]),P=s([]),J=G({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),W=Be(()=>[{title:a("sonarr.rule.validStatus"),dataIndex:"validStatus",slotName:"validStatus",align:"center",width:100},{title:a("sonarr.rule.token"),dataIndex:"token",width:100,ellipsis:!0,tooltip:!0},{title:a("sonarr.rule.priority"),dataIndex:"priority",width:105,ellipsis:!0,tooltip:!0,sortable:{sortDirections:["ascend","descend"]}},{title:a("sonarr.rule.regex"),dataIndex:"regex",width:300,ellipsis:!0,tooltip:!0},{title:a("sonarr.rule.replacement"),dataIndex:"replacement",width:150,ellipsis:!0,tooltip:!0},{title:a("sonarr.rule.offset"),dataIndex:"offset",width:100,align:"center",ellipsis:!0,tooltip:!0},{title:a("sonarr.rule.remark"),dataIndex:"remark",ellipsis:!0,tooltip:!0},{title:a("sonarr.rule.author"),dataIndex:"author",width:150,ellipsis:!0,tooltip:!0},{title:a("sonarr.rule.edit"),slotName:"edit",align:"center",width:100}]),C={current:1,pageSize:10},h=G({showTotal:!0,showPageSize:!0,pageSizeOptions:[10,20,100,1e3],...C}),A=()=>({token:void 0,remark:void 0}),c=s(A()),$=async o=>{d(z),await We(o).then(n=>{P.value=n.data.list,h.current=o.current,h.total=n.data.total}).finally(()=>{p(z),i.value=[]}),await Ze().then(n=>{x.value=n.data})},v=()=>{d(I),$({...C,...c.value}).finally(()=>{p(I)})},Z=()=>{c.value=A()},ee=o=>{$({...C,current:o,...c.value})},te=o=>{C.pageSize=o,h.pageSize=o,$({...h,...c.value})},T=s(""),F=s({}),oe=()=>{T.value=a("rule.form.add.title"),F.value={priority:1e3,regex:".*().*",replacement:"$1",offset:0,author:localStorage.getItem("author")},S.value=!0},ae=()=>{if(!i.value||i.value.length===0){_.warning(a("sonarr.rule.select.warning"));return}d(R),Qe(i.value).then(()=>{_.success(a("sonarr.rule.remove.success")),$({...h,...c.value})}).finally(()=>{p(R)})},ne=()=>{d(B),Me().then(()=>{_.success(a("sonarr.rule.sync.success")),v()}).finally(()=>{p(B)})},E=o=>(d(N),Xe(o.fileItem.file).then(()=>{_.success(a("sonarr.rule.import.success")),v()}).finally(()=>{p(N)}),{upload:E}),le=()=>{d(D),Ye(i.value).then(o=>{let n=localStorage.getItem("author");n=n?`@${n}`:"";const m=document.createElement("a");m.download=`sonarr${n}.json`,m.style.display="none",m.href=URL.createObjectURL(new Blob([o.data])),document.body.appendChild(m),m.click(),URL.revokeObjectURL(m.href),document.body.removeChild(m)}).finally(()=>{p(D)})},se=o=>{T.value=a("rule.form.edit.title"),F.value=o,S.value=!0},re=(o,n)=>{o.id||(d(L),localStorage.setItem("author",o.author)),Ge(o).then(()=>{_.success(a("sonarr.rule.save.success")),v(),n(!0)}).catch(()=>{n(!1)}).finally(()=>{p(L)})},ie=()=>{if(!i.value||i.value.length===0){_.warning(a("sonarr.rule.select.warning"));return}d(U),He(i.value).then(()=>{v(),_.success(a("sonarr.rule.enable.success"))}).finally(()=>{p(U)})},ce=()=>{if(!i.value||i.value.length===0){_.warning(a("sonarr.rule.select.warning"));return}d(V),Je(i.value).then(()=>{v(),_.success(a("sonarr.rule.disable.success"))}).finally(()=>{p(V)})};return v(),(o,n)=>{const m=r("Breadcrumb"),ue=Ue,O=Ve,b=Ne,de=De,K=Te,pe=Fe,Q=Ke,me=r("icon-search"),u=je,_e=r("icon-refresh"),j=qe,fe=r("icon-plus"),ve=r("icon-delete"),ye=r("icon-sync"),M=r("icon-check-circle"),X=Pe,Y=r("icon-close-circle"),ge=r("icon-upload"),he=Ae,be=r("icon-download"),ke=r("icon-minus"),we=r("icon-eye"),Se=r("icon-eye-invisible"),Ce=r("icon-edit"),$e=Ee,xe=Oe;return y(),H("div",et,[e(m,{items:["menu.sonarr","menu.sonarr.rule"]},null,8,["items"]),e(Le,{visible:S.value,"onUpdate:visible":n[0]||(n[0]=l=>S.value=l),"token-list":x.value,data:F.value,title:T.value,onSave:re},null,8,["visible","token-list","data","title"]),e(xe,{class:"general-card",title:q(a)("menu.sonarr.rule")},{default:t(()=>[e(K,null,{default:t(()=>[e(b,{flex:1},{default:t(()=>[e(pe,{"label-col-props":{span:5},"wrapper-col-props":{span:15},"label-align":"left",model:c.value},{default:t(()=>[e(K,{gutter:16},{default:t(()=>[e(b,{span:8},{default:t(()=>[e(O,{field:"token",label:o.$t("sonarr.rule.token")},{default:t(()=>[e(ue,{modelValue:c.value.token,"onUpdate:modelValue":n[1]||(n[1]=l=>c.value.token=l),options:x.value,placeholder:o.$t("sonarr.rule.token.placeholder"),"allow-search":"","allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:t(()=>[e(O,{field:"remark","label-col-props":{span:8},label:o.$t("sonarr.rule.remark")},{default:t(()=>[e(de,{modelValue:c.value.remark,"onUpdate:modelValue":n[2]||(n[2]=l=>c.value.remark=l),"allow-clear":"",placeholder:o.$t("sonarr.rule.remark.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Q,{style:{height:"35px"},direction:"vertical"}),e(b,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(j,{size:18},{default:t(()=>[e(u,{type:"primary",loading:I.value,onClick:v},{icon:t(()=>[e(me)]),default:t(()=>[g(" "+f(o.$t("sonarr.rule.search")),1)]),_:1},8,["loading"]),e(u,{onClick:Z},{icon:t(()=>[e(_e)]),default:t(()=>[g(" "+f(o.$t("sonarr.rule.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{style:{"margin-top":"0"}}),e(K,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(b,{span:12},{default:t(()=>[e(j,null,{default:t(()=>[e(u,{type:"primary",status:"success",loading:L.value,onClick:oe},{icon:t(()=>[e(fe)]),default:t(()=>[g(" "+f(o.$t("sonarr.rule.add")),1)]),_:1},8,["loading"]),e(u,{type:"primary",status:"danger",loading:R.value,onClick:ae},{icon:t(()=>[e(ve)]),default:t(()=>[g(" "+f(o.$t("sonarr.rule.remove")),1)]),_:1},8,["loading"]),e(u,{type:"primary",loading:B.value,onClick:ne},{icon:t(()=>[e(ye)]),default:t(()=>[g(" "+f(o.$t("sonarr.rule.sync")),1)]),_:1},8,["loading"]),e(X,{content:o.$t("sonarr.rule.enable")},{default:t(()=>[e(u,{type:"primary",status:"success",loading:U.value,onClick:ie},{icon:t(()=>[e(M,{size:"21"})]),_:1},8,["loading"])]),_:1},8,["content"]),e(X,{content:o.$t("sonarr.rule.disable")},{default:t(()=>[e(u,{type:"primary",status:"warning",loading:V.value,onClick:ce},{icon:t(()=>[e(Y,{size:"21"})]),_:1},8,["loading"])]),_:1},8,["content"])]),_:1})]),_:1}),e(b,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:t(()=>[e(j,null,{default:t(()=>[e(he,{"custom-request":E,"show-file-list":!1},{"upload-button":t(()=>[e(u,{type:"primary",loading:N.value,status:"success"},{icon:t(()=>[e(ge)]),default:t(()=>[g(" "+f(o.$t("sonarr.rule.import")),1)]),_:1},8,["loading"])]),_:1}),e(u,{type:"primary",status:"normal",loading:D.value,onClick:le},{icon:t(()=>[e(be)]),default:t(()=>[g(" "+f(o.$t("sonarr.rule.export")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e($e,{selectedKeys:i.value,"onUpdate:selectedKeys":n[3]||(n[3]=l=>i.value=l),"row-key":"id",size:"medium",data:P.value,columns:q(W),bordered:!1,loading:z.value,pagination:h,"row-selection":q(J),onPageSizeChange:te,onPageChange:ee},{seasonNumber:t(({record:l})=>[l.seasonNumber===-1?(y(),k(ke,{key:0,size:"13",style:w({color:"var(--color-neutral-6)"})},null,8,["style"])):(y(),H("span",tt,f(l.seasonNumber),1))]),monitored:t(({record:l})=>[l.monitored===1?(y(),k(we,{key:0,size:"21",style:w({color:"rgb(var(--green-6))"})},null,8,["style"])):(y(),k(Se,{key:1,size:"21",style:w({color:"var(--color-neutral-6)"})},null,8,["style"]))]),validStatus:t(({record:l})=>[l.validStatus===1?(y(),k(M,{key:0,size:"21",style:w({color:"rgb(var(--green-6))"})},null,8,["style"])):(y(),k(Y,{key:1,size:"21",style:w({color:"rgb(var(--orange-6))"})},null,8,["style"]))]),edit:t(({record:l})=>[e(u,{type:"text",size:"mini",onClick:nt=>se(l)},{default:t(()=>[e(Ce,{size:"medium"})]),_:2},1032,["onClick"])]),_:1},8,["selectedKeys","data","columns","loading","pagination","row-selection"])]),_:1},8,["title"])])}}});const Ct=Ie(ot,[["__scopeId","data-v-1ea3ace3"]]);export{Ct as default};
